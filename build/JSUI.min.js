!function(){"use strict";function t(t){return"string"==typeof t}function e(t){return"number"==typeof t}function n(t){return"object"===("undefined"==typeof t?"undefined":se(t))}function r(t){return t.charAt(0).toLowerCase()+t.slice(1)}function i(t){return null===t}function o(t){return Array.isArray(t)}function a(t){return"function"==typeof t}function u(t,e,n){var r=n;Object.defineProperty(t,e,{get:function(){return r},set:function(t){var n=r;if(r=t,n!==t){var i={owner:this,property:e,old:n,"new":r},o=(this.trigger||this.$trigger).bind(this);o&&(o(e+"Changed",i),o("Changed",i))}},configurable:!0,enumerable:!0})}function s(){delete this.pool[this.id]}function c(){var t=this;Object.keys(this.pool).forEach(function(e){delete t.pool[e]})}function l(){return Oe>je&&(ke+=Oe,Oe=0),ke+Oe++}function h(t){return t.prototype instanceof Te}function f(t,e){var n=e.importance-t.importance,r=e.private.created-t.private.created;return n?n:r}function v(t){return t instanceof Te}function d(t,e){var n=[];return this.forEach(function(r){return a(r[t])?void n.push(r[t].apply(r,e)):void n.push(void 0)}),n}function p(t,e){}function y(t){return t instanceof Element}function m(t){return t}function g(t){return""===t}function b(t,e){if(e&&y(t)){if(t.classList&&t.classList.add)return void t.classList.add(e);var n=t.className.split(" ");~n.indexOf(e)||(n.push(e),t.className=n.join(" "))}}function E(t){return y(t)?t.tagName.toLowerCase():"none"}function k(t){return this.element=t,E(t)}function O(t){return t=t||"div",this.element=document.createElement(t),t}function j(t){var e=this,n=en(t),r=_e[n];t=(r||function(){return _e.string.call(this,"div")}).call(this,t),this.element.uid=this.uid;var i=Re.Development;return i.enabled&&i.references&&(this.element.JSUI=this),u(this,"type"),this.on("typeChanged",function(t){if(t&&t.detail&&t.detail.new&&e.element&&t.detail.new){var n=t.detail.new;if(!n)return;b(e.element,n)}}),this.type=t,this.style=new He(this),this.trigger("constructed"),this}function x(t){this.element&&this.element.appendChild(t)}function w(t){this.element&&t.element&&(this.element.appendChild(t.element),this.private.children=this.private.children||{},this.private.children[t.uid]=t,t.private.parent=this,t.context="default"===t.context?this.context:t.context);var e={as:function(e){if(e){this[e]=t,t.private.mapped=t.private.mapped||{};var n=t.private.mapped;n[this.uid]=n[this.uid]||[],n[this.uid].push(e),t.attribute("as",e),b(t.element,"as-"+e)}return t}.bind(this)};return e}function C(t){var e=this,n=[];return t.forEach(function(t){n.push(e.add(t))}),n}function S(t){u(this,t)}function P(t){if(this.element&&this.element.appendChild){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.appendChild(n.firstChild);this.element.appendChild(e)}}function T(t){return S.call(this,t)}function A(t){return t.prototype instanceof Qe}function N(t){return A(t)?this.add(new t):void 0}function $(t){t&&t.appendChild(this.element)}function R(t){return t.add(this)}function H(t){var e=this,n=[];return t.forEach(function(t){n.push(e.addTo(t))}),n}function _(t){var e=this,n=[];return t.forEach(function(t){n.push(e.remove(t))}),n}function D(t){return t.remove?t.remove():void 0}function L(){return this.trigger("destructed"),this.destructor()}function U(t,e){var n=this,r=[];return t.forEach(function(t){r.push(n.on(t,e))}),r}function I(t){var e=this,n={};return Object.keys(t).forEach(function(r){var i=t[r];n[r]=e.on(r,i)}),n}function F(t){var e=this,n=arguments;Object.keys(t).forEach(function(r){var i=t[r];i.apply(e,n)})}function J(t,e){if(a(e)){var n=(this.private||{}).Events||{},r=n[t];if(!r){n[t]={},r=n[t];var i=F.bind(this,r),o=this.element;y(o)&&o.addEventListener(t,i,!1)}if(a(e)){var u=l();r[u]=e}var h={id:u,pool:r,remove:s,removeAll:c};return h}}function V(t,e){return J.call(this,t,e)}function z(t,e){return V.call(this,t,e)}function M(t,e){var n=this,r=[];return t.forEach(function(t){r.push(n.trigger(t,e))}),r}function G(t){var e=this;Object.keys(t).forEach(function(n){var r=t[n];e.trigger(n,r)})}function q(t,e){if(!this.element)return!1;var n=new CustomEvent(t,{detail:e});return this.element.dispatchEvent(n),!0}function B(t,e){return q.call(this,t,e)}function X(t){var e=this,n=[];return t.forEach(function(t){n.push(e.find(t))}),n}function Z(t){var e=[],n=Qe.isPrototypeOf(t.prototype);if(n){var r=t.prototype;this.children(function(t){r.isPrototypeOf(t)&&e.push(t)})}return e}function W(t){var e=[];return this.children(function(n){n instanceof t&&e.push(n)}),e}function K(t){var e=[];return this.children(function(n){if(n.element){var r=n.element,i=r.innerText||r.textContent||"";t.test(i)&&e.push(n)}}),e}function Q(t){var e=null;return e=this.element.querySelectorAll(t),e=e&&null!==e?e:[]}function Y(t){return Q.call(this,t)}function tt(){var t=[];return this.children(function(e){t.push(e)}),t}function et(t){var e=this,n=[];return t.forEach(function(t){n.push(e.with(t))}),n}function nt(t){return t.call(this),this}function rt(t){var e=this,n=[];return t.forEach(function(t){n.push(e.do(t))}),n}function it(t){var e=this,n={};return Object.keys(t).forEach(function(r){n[r]=e.do(r,t[r])}),n}function ot(t,e){return a(this[t])?o(e)?this[t].apply(this,e):this[t](e):void 0}function at(t,e){return n(t)?t[e]:void 0}function ut(e,n){return t(n)?n.substring(1).split(".").reduce(at,e):o(n)?n.reduce(at,e):void 0}function st(t,e){var n=e.substring(1).split(".");if(n.length){if(1===n.length)return{context:t,property:n[0]};var r=n.splice(n.length-1,1),i=ut(t,n);return i?{context:i,property:r[0]}:!1}}function ct(t,e){var n=st(this,t);if(n&&n.context&&n.property){var r=n.context[n.property];return a(r)?o(e)?r.apply(n.context,e):r.call(n.context,e):void 0}}function lt(t){var e=this,n=[];return t.forEach(function(t){n.push(e.get(t))}),n}function ht(t){return t&&this.hasOwnProperty(t)?this[t]:void 0}function ft(t){return ut(this,t)}function vt(t){var e=this,n={};return Object.keys(t).forEach(function(r){n[r]=e.set(r,t[r])}),n}function dt(t,e){return t&&this.hasOwnProperty(t)?(this[t]=e,e):void 0}function pt(t,e,n){var r=e.substring(1).split(".");if(r.length){if(1===r.length)return t[r[0]]=n,!0;var i=r.splice(r.length-1,1),o=ut(t,r);return o?(o[i[0]]=n,!0):!1}}function yt(t,e,n){return pt(t,e,n)}function mt(t,e){return yt(this,t,e)}function gt(t){if(this.private&&this.element){if(!this.private.text){var t=document.createTextNode(t);return this.private.text=t,this.element.appendChild(t),!0}return this.private.text.nodeValue=t,!0}return!1}function bt(t){return _string.call(this,t)}function Et(t,e){if(a(e)&&y(t))for(var n=t.attributes,r=n.length-1;r>=0;r--){var i=n[r],o=i.name,u=i.value;e(o,u,i)}}function kt(){var t={};return Et(this.element,function(e,n,r){t[e]=n}),t}function Ot(t){return this.element.getAttribute(t)}function jt(){return Ot.apply(this,arguments)}function xt(t){var e=this,n={};return t.forEach(function(t){n[t]=e.attribute(t)}),n}function wt(t,e){var r=this;n(e)?e:{};return Object.keys(t).forEach(function(e){results[e]=r.attribute(e,t[e])}),results}function Ct(t){return wt.call(this,t)}function St(t){return"undefined"==typeof t}function Pt(t,e){return St(e)||i(e)?(this.element.removeAttribute(t),!0):(this.element.setAttribute(t,e),!0)}function Tt(){return Pt.apply(this,arguments)}function At(t,e){var n=this,r=[];return t.forEach(function(t){r.push(n.attribute(t,e))}),r}function Nt(t){var e=this,n=[];return t.forEach(function(t){n.push(e.class(t))}),n}function $t(t){var e="";return Object.keys(t).forEach(function(n){t[n]&&(e+=n)}),this.element.className=e,e}function Rt(e){if(y(e)){var n={};if(t(e.className)){var r=e.className.split(" ");o(r)&&r.forEach(function(t){n[t]=!0})}return n}}function Ht(t){return g(t)?void 0:new We(this.element,t)}function _t(){return Ht.apply(this,arguments)}function Dt(){return Rt(this.element)}function Lt(t){return t instanceof Qe}function Ut(t){return t instanceof RegExp}function It(t){return Ye.test(t)}function Ft(t){return"@"===t[0]}function Jt(t){var e=t.replace(/^[^-_a-zA-Z]+/,"_").replace(/^-(?:[-0-9]+)/,"_"),n=e&&e.replace(/[^-_a-zA-Z0-9]+/g,"_");return n}function Vt(t){return new Function(t)()}function zt(){Object.defineProperty(this,"$private",{configurable:!0,enumerable:!1,writable:!0,value:{Events:{},Hooks:{},State:{}}}),Object.defineProperty(this,"$uid",{configurable:!0,enumerable:!1,writable:!0,value:l()})}function Mt(t,e){Object.defineProperty(cn.prototype,t,{configurable:!0,enumerable:!1,writable:!0,value:e})}function Gt(t){return vn[t]}function qt(t){return t&&"#text"===t.nodeName}function Bt(t){return t instanceof cn}function Xt(t){return t.prototype instanceof cn}function Zt(t,e){if(a(e)&&isElement(t))for(var n=t.childNodes.length,r=0;n>r;r++){var i=t.childNodes[r];if(e(i))break}}function Wt(t){if(y(t)){var e;return Zt(t,function(t){return qt(t)?void 0:(e=t,!0)}),e}}function Kt(t,e){for(var n=[],r=0;r<t.childNodes.length;r++){var i=t.childNodes[r];if(qt(i)&&(n.push(i),e))break}return n}function Qt(t,e){if(a(t)){var n;return function(){clearTimeout(n),n=setTimeout(t,e)}}}function Yt(t,e,n){return t.hasOwnProperty(e)?a(t[e])?(t[e].apply(t,n),!0):(t[e]=n,!0):!1}function te(t){var e=[];do Object.getOwnPropertyNames(t).forEach(function(t){-1===e.indexOf(t)&&e.push(t)});while((t=Object.getPrototypeOf(t))&&t!==pn);return e}function ee(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ne(t,e,n){var r=this;Object.defineProperty(this,"$name",{configurable:!0,enumerable:!1,writable:!0,value:""+t}),Object.defineProperty(this,"$uid",{configurable:!0,enumerable:!1,writable:!0,value:""+e}),Object.keys(n).forEach(function(t){var e=new n[t];Object.defineProperty(e,"$parent",{configurable:!0,enumerable:!1,writable:!0,value:r}),r[t]=e,e.$on("Changed",function(t){t.name=r.$name,t.namespace=r.$namespace,r.$trigger("Changed",t)})})}function re(t,e,r){t=Jt(t),r=r||t;var i={},o="\n		return (function(name, namespace, structure, Data, Subclasses, constructor, subconstructor) {\n			function "+t+"() {\n				constructor.call(this);\n				subconstructor.call(this, name, namespace, Subclasses);\n			}\n			"+t+".prototype = Object.create(Data.prototype);\n			"+t+".constructor = "+t+";\n			"+t+".prototype.toJSON = function toJSON() {\n				var self = this;\n				var copy = {};\n				Object.keys(structure).forEach(function(key) {\n					console.log(key)\n					copy[key] = self[key];\n				});\n				console.log(copy);\n				return copy;\n			};\n			return "+t+";\n		})\n	",a=Vt.call(window,o)(t,r,e,cn,i,zt,ne);return Object.keys(e).forEach(function(r){var o=e[r];return n(o)?void(i[r]=re(r,o,t+"."+r)):void Object.defineProperty(a.prototype,r,{get:function(){var t=this.$private.State;return t.hasOwnProperty(r)?this.$private.State[r]:o},set:function(t){var e=this.$private.State;if(e){var n=e[r];if(e[r]=t,n!==t){var i={owner:this,property:r,old:n,"new":t},o=e.$trigger;o||(o=this.$trigger.bind(this),e.$trigger=o),o&&(o(r+"Changed",i),o("Changed",i))}}else;},configurable:!0,enumerable:!0})}),a}function ie(t,e,n){var r=E(t),i=r.split("-").reduce(at,e);if(!i)return void 0;for(var o=new i,a=t.attributes,u=(Gt(r),a.length-1);u>=0;u--){var s=a[u],c=s.name,l=s.value;o.element.setAttribute(c,l),o.hasOwnProperty(c)?Yt(o,c,l):(o.add(c),o.on(c+"Changed",Parser.Events.onParsedElementChanged),o[c]=l)}var h=[];return Zt(t,function(t){if(qt(t)){var n=document.createTextNode("");return o.element.appendChild(n),o.private.text=n,void h.push({node:n,value:t.nodeValue})}var r=t.getAttribute("as"),i=o.add(Parser.Types.default(t,e));r&&i&&isFunction(i.as)&&i.as(r)}),h.forEach(function(t){t.node.nodeValue=t.value}),o}function oe(t,e,n){var r=!1;n||(n={map:{},aliases:{},Counts:{element:0,instance:0,text:0}},r=!0);var i,o=E(t),a=n.map[o];if(!a){var u=o.split("-").reduce(at,e);if(!A(u))return;i="element"+n.Counts.element,n.Counts.element++,a={type:u,alias:i},n.map[o]=a,n.aliases[i]=a}i||(i=a.alias);var s=t.getAttribute("as"),c="instance"+n.Counts.instance;n.Counts.instance++;var l="	// "+(s||"Anonymous Element"),h="	var "+c+" = "+(r?"this":"new "+i+"();"),f=[],v=[],d=[];Zt(t,function(t){if(qt(t)){var r="text"+n.Counts.text;return v.push("	var "+r+" = document.createTextNode('');"),v.push("	"+c+".element.appendChild("+r+");"),f.push({name:r,value:t.nodeValue}),void n.Counts.text++}v.push("\n");var i=oe(t,e,n),o=i.name;v.push(i.code),v.push("\n	// Adding Children"),v.push("	"+c+".add("+o+")"+(s?".as('"+s+"')":"")+";"),v.push("\n	// Text Node Assignments"),d.push(i.text)});var p=f[f.length-1],y=p.name;return v.push("	"+c+".private.text = "+y+";"),f=Array.prototype.concat.apply(f,d),v=v.join("\n"),{tag:o,directory:a,name:c,code:[l,h,v].join("\n"),as:s,text:f,state:n}}function ae(t,e,n){var r=t.childNodes,i=(r.length,Wt(t));if(i){var o,a=E(i),u=n.getAttribute("name")||"Anonymous"+l(),s=n.getAttribute("inherits"),c=n.getAttribute("tag")||a;s&&(o=s.split("-").reduce(at,e)),o=o||element;var h=oe(i,e),f=Object.keys(h.state.aliases),v=["\n	// Imports"];f.forEach(function(t){v.push("	var "+t+" = classes."+t+".type;")}),v.push("\n");var d={},p=[];h.text.forEach(function(t){var e=t.name,n=t.value;d[e]=n,p.push("	"+e+".nodeValue = texts."+e+";")});var y="\n return (function compile(element, constructor, classes, texts, inherits) {\n"+v.join("\n")+("\n	function "+u+"() { \n")+"	constructor = (inherits === element ? constructor : inherits.constructor);\n"+("	constructor.call(this, '"+c+"'); \n")+("	this.type = '"+u+"'; \n\n")+"	// Generated \n"+h.code+"\n\n	// Assign Text Values \n"+p.join("\n")+"\n}\n"+("\n	"+u+".prototype = Object.create(inherits.prototype);\n")+("\n	"+u+".constructor = "+u+";\n")+("	 return "+u+";\n")+"});",m=Vt.call(window,y)(Qe,j,h.state.aliases,d,o);return m}}function ue(e,n){var r;if(t(e)&&(r=document.createElement("container"),r.innerHTML=e),y(e)&&(r=e),r){var i=Wt(r),o=E(i),a=gn[o];return(a||gn.default).call(this,i,n||un,i)}}var se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},ce=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},le=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),he=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},fe=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},ve=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},de={},pe=["webkit","moz","ms","o"],ye={},me=document.createElement("div");for(var ge in me.style)try{me.style[ge]="inherit";var be=(me.getAttribute("style")||"").split(":")[0];ye[ge]=be,me.setAttribute("style",""),pe.forEach(function(t){var e="-"+t+"-";if(~be.indexOf(e)){var n=ge;n=r(n.replace(t,"")),ye[n]=be,ye[be.replace(e,"")]=be}})}catch(Ee){}var ke="",Oe=0,je=Number.MAX_SAFE_INTEGER-1,xe=function(){function e(){ce(this,e),this.private={Events:{},Hooks:{}}}return le(e,[{key:"add",value:function(e,r){var i=this;return t(e)?void u(this,e):o(e)?void e.forEach(function(t){i.add(t,r)}):void(n(e)&&Object.keys(e).forEach(function(t){i.add(t,e[t])}))}},{key:"remove",value:function(e){var n=this;return t(e)?void delete this[e]:void(o(e)&&e.forEach(function(t){n.remove(t)}))}},{key:"on",value:function(e,n){if(t(e)&&a(n)){var r=this.private.Events,i=this.private.Hooks,o=r[e],u=this;if(!o){var h=function(){var t=arguments;Object.keys(o).forEach(function(e){var n=o[e];n.apply(u,t)})};r[e]={},o=r[e],i[e]=h}if("function"==typeof n){var f=l();o[f]=n}var v={id:f,pool:o,remove:s,removeAll:c};return v}}},{key:"trigger",value:function(t,e){var n=this.private.Hooks,r=n[t];a(r)&&r(e)}},{key:"destructor",value:function(){for(var t in this)delete this[t]}}]),e}(),we=function(t){function e(){ce(this,e);var t=ve(this,Object.getPrototypeOf(e).call(this));return t.uid=l(),t}return fe(e,t),e}(xe),Ce=function(t){function e(){ce(this,e);var t=ve(this,Object.getPrototypeOf(e).call(this));return t.private.styles={},t}return fe(e,t),e}(we);Object.keys(ye).forEach(function(t){Object.defineProperty(Ce.prototype,t,{get:function(){return this.private.styles[t]},set:function(e){var n=this.private.styles[t];if(this.private.styles[t]=e,i(e)&&delete this.private.styles[t],n!==e){var r={owner:this,property:t,old:n,"new":e};this.trigger&&(this.trigger(t+"Changed",r),this.trigger("styleChanged",r))}},configurable:!0,enumerable:!0})});var Se=function(t){function e(t,n,r){return ce(this,e),ve(this,Object.getPrototypeOf(e).call(this))}return fe(e,t),le(e,[{key:"throw",value:function(t,e,n){window.console&&window.console.trace&&console.trace(t||"")}}]),e}(Error),Pe=function(n){function r(t){ce(this,r);var e=ve(this,Object.getPrototypeOf(r).call(this));t=t||"default",e.private.rules={},e.private.timer=!1,e.private.element=!1,e.private.context=t;var n=de[t];if(n){var i;return e.private=n.private,i=e,ve(e,i)}var o=document.createElement("style");return o.appendChild(document.createTextNode("")),o.setAttribute("id","style-"+t),document.head.appendChild(o),e.private.element=o,de[t]=e,e}return fe(r,n),le(r,[{key:"add",value:function(t){if(v(t)){var e=this.private.rules;return e[t.uid]?(e[t.uid].references++,!0):(e[t.uid]={references:1,rule:t},this.render(10))}return h(t)?this.add(new t(this.context)):void 0}},{key:"remove",value:function(e){var n=this.private.rules;if(t(e)){var r=n[e];return void(r&&(r.references--,r.references<1&&(delete n[e],this.render(10))))}v(e)&&this.remove(e.uid)}},{key:"render",value:function(t){var n=this,r=this.private.rules;if(clearTimeout(this.private.timer),e(t))return void(this.private.timer=setTimeout(this.render.bind(this),t));var i=Object.keys(r);if(!i.length)return void document.head.removeChild(this.private.element);var o=document.createElement("style");o.setAttribute("id","style-"+this.context),o.appendChild(document.createTextNode("")),document.head.appendChild(o),o.sheet.disabled=!0;var a=[];i.forEach(function(t){var e=r[t];a.push(e.rule)}),a.sort(this.sorter),a.forEach(function(t){var e=t.render(n.context);o.sheet.insertRule(e,t.importance)}),o.sheet.disabled=!1,document.head.removeChild(this.private.element),this.private.element=o,this.trigger("rendered")}},{key:"context",get:function(){return this.private.context}},{key:"variables",get:function(){},set:function(t){}},{key:"sorter",get:function(){return this.private.sorter?this.private.sorter:f},set:function(t){a(t)&&(this.private.sorter=t)}}]),r}(we),Te=function(r){function i(t,e){ce(this,i);var r=ve(this,Object.getPrototypeOf(i).call(this));return r.private.importance=0,r.private.created=(new Date).valueOf(),t&&(r.selector=t),n(e)&&r.set(e),r}return fe(i,r),le(i,[{key:"set",value:function(e,r){var i=this;return n(e)?void Object.keys(e).forEach(function(t){var n=e[t];i[t]=n}):void(t(e)&&arguments.length>1&&t(r)&&(this[e]=r))}},{key:"render",value:function(t){var e=this;t=t||this.private.context||"default";var n=de[t]||new Pe(t);if(!n.private.rules[this.uid])return void n.add(this);if(!this.selector){var r=new Se;r.throw()}var i=[],o="";Object.keys(this.private.styles).forEach(function(t){var n=ye[t],r=e.private.styles[t];i.push(n+": "+r+";")});var a=this.selector,u=this.media,s=u?"	":"",c=i.join("\n	"+s);return o=""+s+a+" {\n	"+s+c+"\n"+s+"}",u&&(o=u+" {\n"+o+"\n}"),o}},{key:"selector",get:function(){return this.private.selector},set:function(e){var n=this,r=this,i=function(){var t=n.private.selector;n.trigger("selectorChanged",{owner:r,old:t,"new":e})};return t(e)?(this.private.selector=e,void i()):void 0}},{key:"media",get:function(){return this.private.media},set:function(e){var n=this,r=this,i=function(){var t=n.private.media;n.trigger("mediaChanged",{owner:r,old:t,"new":e})};return t(e)?(this.private.media=e,void i()):void 0}},{key:"importance",get:function(){return this.private.importance||0},set:function(t){e(t)&&(this.private.importance=t),this.trigger("importanceChanged")}},{key:"context",get:function(){return this.private.context||"default"},set:function(t){this.private.context=t,this.trigger("contextChanged")}}]),i}(Ce),Ae=function(t){function e(){ce(this,e);var t=ve(this,Object.getPrototypeOf(e).call(this));return t.private.context="default",t.private.style={rules:{}},t}return fe(e,t),le(e,[{key:"add",value:function(t){if(v(t)){var e=this.private.style.rules,n=e[t.uid];if(!n)return n={rule:t,context:this.context},e[t.uid]=n,void t.render(this.context);if(n.context!==this.context){var r=de[n.context];return void(r&&(r.remove(t),t.render(this.context)))}}}},{key:"context",get:function(){return this.private.context},set:function(t){var e=this,n=this.private.context;n!==t&&(this.private.context=t,Object.keys(this.private.style.rules).forEach(function(t){var r=e.private.style.rules[t];de[n].remove(r.rule),r.rule.render(e.private.context)}),this.trigger("contextChanged"))}}]),e}(we),Ne=function(t){function e(t){ce(this,e);var n=ve(this,Object.getPrototypeOf(e).call(this));return n.private.host=t,n.context="behavior",n}return fe(e,t),le(e,[{key:"destructor",value:function(){he(Object.getPrototypeOf(e.prototype),"destructor",this).call(this)}},{key:"host",get:function(){return this.private.host},set:function(t){this.private.host=t}}]),e}(Ae),$e={string:d,path:p},Re={Development:{enabled:!1,traceErrors:!0,haltOnErrors:!0,references:!0},Production:{}},He=function(e){function r(t){ce(this,r);var e=ve(this,Object.getPrototypeOf(r).call(this));return e.private.host=t||!1,e.on("styleChanged",function(t){e.private.host&&t.property&&(e.private.host.element.style[t.property]=t.new)}),e}return fe(r,e),le(r,[{key:"set",value:function(e,r){var i=this;return n(e)?void Object.keys(e).forEach(function(t){var n=e[t];i[t]=n}):void(t(e)&&arguments.length>1&&t(r)&&(this[e]=r))}},{key:"host",get:function(){return this.private.host},set:function(t){Lt(t)&&(this.private.host=t.element)}}]),r}(Ce),_e={element:k,string:O},De=function(){var t=this,e=this.element,n=this.private;if(e){var r=e.parentNode;if(a(e.remove))return void e.remove();if(r&&a(r.removeChild))return void r.removeChild(e)}var i=this.style;i&&i.Host&&delete i.Host,Object.keys(this).forEach(function(e){delete t[e]});var u=n.parent;if(u){if(n&&n.mapped){var s=n.mapped[u.uid];s&&o(s)&&s.forEach(function(t){delete u[t]})}u.children&&delete u.children[this.uid]}var c=n.children;return c&&Object.keys(c).forEach(function(t){var e=c[t];e&&(a(e.remove)&&e.remove(),delete c[t])}),e=null,n=null,u=null,c=null,!0},Le={element:x,jsui:w,array:C,string:S,html:P,path:T,"function":N},Ue={element:$,jsui:R,array:H},Ie={array:_,jsui:D,undefined:L},Fe={array:U,object:I,string:V,path:z},Je={array:M,object:G,string:q,path:B},Ve={array:X,"function":Z,jsui:W,regex:K,string:Q,path:Y,undefined:tt},ze={array:et,"function":nt},Me={array:rt,object:it,string:ot,path:ct},Ge={array:lt,string:ht,path:ft},qe={object:vt,string:dt,path:mt},Be={string:gt,path:bt},Xe={Get:{undefined:kt,string:Ot,path:jt,array:xt,object:Ct},Set:{string:Pt,path:Tt,array:At,object:wt}},Ze=function(){function t(e){ce(this,t),this.private={element:e||!1}}return le(t,[{key:"element",get:function(){return this.private.element},set:function(t){this.private.element=t}}]),t}(),We=function(t){function e(t,n){ce(this,e);var r=ve(this,Object.getPrototypeOf(e).call(this,t));return r.element=t,r.private.classes=n.split(" "),r}return fe(e,t),le(e,[{key:"add",value:function(){var t=Rt(this.element)||{};return this.private.classes.forEach(function(e){t[e]=!0}),this.element.className=Object.keys(t).join(" "),t}},{key:"remove",value:function(){var t=Rt(this.element)||{};return this.private.classes.forEach(function(e){delete t[e]}),this.element.className=Object.keys(t).join(" "),t}},{key:"toggle",value:function(){var t=Rt(this.element)||{};return this.private.classes.forEach(function(e){return t[e]?void delete t[e]:void(t[e]=!0)}),this.element.className=Object.keys(t).join(" "),t}},{key:"exists",value:function(){for(var t=Rt(this.element)||{},e=this.private.classes,n=e.length,r=0;n>r;r++){var i=e[r];if(!t[i])return!1}return!0}}]),e}(Ze),Ke={array:Nt,object:$t,string:Ht,path:_t,undefined:Dt},Qe=function(t){function e(t){ce(this,e);var n=ve(this,Object.getPrototypeOf(e).call(this,t));return j.call(n,t),n.on("contextChanged",function(){n.children(function(t){t.context="default"===t.context?n.context:t.context})}),n}return fe(e,t),le(e,[{key:"add",value:function(t){var n=en(t),r=Le[n];return(r||he(Object.getPrototypeOf(e.prototype),"add",this)||m).call(this,t)}},{key:"addTo",value:function(t){var e=en(t),n=Ue[e];return(n||m).call(this,t)}},{key:"remove",value:function(t){var e=en(t),n=Ie[e];return(n||m).call(this,t)}},{key:"on",value:function(t,e){var n=en(t),r=Fe[n];return(r||m).call(this,t,e)}},{key:"trigger",value:function(t,n){var r=en(t),i=Je[r];return he(Object.getPrototypeOf(e.prototype),"trigger",this).call(this,t,n),(i||m).call(this,t,n)}},{key:"find",value:function(t){var e=en(t),n=Ve[e];return(n||m([])).call(this,t)}},{key:"with",value:function(t){var e=en(t),n=ze[e];return(n||m).call(this,t)}},{key:"do",value:function(t,e){var n=en(t),r=Me[n];return(r||m).call(this,t,e)}},{key:"get",value:function(t){var e=en(t),n=Ge[e];return(n||m).call(this,t)}},{key:"set",value:function(t,e){var n=en(t),r=qe[n];return(r||m).call(this,t,e)}},{key:"text",value:function(t){var e=en(t),n=Be[e];return(n||m).call(this,t)}},{key:"attribute",value:function(t,e){if(y(this.element)&&!g(t)){var n=en(t),r=arguments.length>1,i=Xe[r?"Set":"Get"][n];return(i||m).apply(this,[t,e])}}},{key:"class",value:function(t){var e=en(t),n=Ke[e];return(n||m).call(this,t)}},{key:"children",value:function t(e){var n=[];if(a(e)&&self.private&&self.private.children){var t=self.private.children;Object.keys(t).forEach(function(r){var i=t[r];i&&n.push(e(i,r))})}return n}},{key:"destructor",value:function(){De.call(this)}}]),e}(Ae),Ye=/^<([a-z]+)([^<]+)*(?:>(.*)<\/\1>|\s+\/>)$/,tn={object:{"null":i,array:o,element:y,jsui:Lt,regex:Ut},string:{html:It,path:Ft}},en=function(t){var e="undefined"==typeof t?"undefined":se(t),n=tn[e];if(!n)return e;for(var r in n){var i=n[r];if(i(t))return r}return e},nn=function(t){function e(t){ce(this,e);var n=ve(this,Object.getPrototypeOf(e).call(this));return o(t)&&t.forEach(function(t){n.push(t)}),n}return fe(e,t),le(e,[{key:"doToEach",value:function(t,e){var n=en(t),r=$e[n];return(r||unhandled).call(this,t,e)}}]),e}(Array),rn=function(t){function e(t){var n;ce(this,e);var r=ve(this,Object.getPrototypeOf(e).call(this,t));return n=r.doToEach("constructor",arguments),ve(r,n)}return fe(e,t),le(e,[{key:"add",value:function(){return this.doToEach("add",arguments)}},{key:"addTo",value:function(){return this.doToEach("addTo",arguments)}},{key:"remove",value:function(){return this.doToEach("remove",arguments)}},{key:"on",value:function(){return this.doToEach("on",arguments)}},{key:"trigger",value:function(){return this.doToEach("trigger",arguments)}},{key:"find",value:function(){return this.doToEach("find",arguments)}},{key:"with",value:function(){return this.doToEach("with",arguments)}},{key:"do",value:function(){return this.doToEach("do",arguments)}},{key:"get",value:function(){return this.doToEach("get",arguments)}},{key:"set",value:function(){return this.doToEach("set",arguments)}},{key:"text",value:function(){return this.doToEach("text",arguments)}},{key:"attribute",value:function(){return this.doToEach("attribute",arguments)}},{key:"class",value:function(){return this.doToEach("class",arguments)}},{key:"children",value:function(){return this.doToEach("children",arguments)}},{key:"destructor",value:function(){return this.doToEach("destructor",arguments)}}]),e}(nn),on=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","datalist","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","video","wbr"],an=function(t,e,n,r){t=Jt(t);var i=n||Qe,o=r||j,a="\n		return (function(element, constructor) {\n			function "+t+"() {\n				constructor.call(this, '"+e+"');\n				this.type = '"+e+"';\n			}\n			"+t+".prototype = Object.create(element.prototype);\n			"+t+".constructor = "+t+";\n			return "+t+";					\n		})\n	";return Vt.call(window,a)(i,o)},un={};on.forEach(function(t){un[t]=an(t,t)});var sn=function(e){function r(){return ce(this,r),ve(this,Object.getPrototypeOf(r).call(this))}return fe(r,e),le(r,[{key:"add",value:function(e,r){var i=this;return t(e)?(u(this,e,r),void this.trigger("variableAdded",{name:e,value:r})):void(n(e)&&Object.keys(e).forEach(function(t){i.add(t,e[t])}))}},{key:"remove",value:function(e){var n=this;return t(e)?this[e]?(delete this[e],trigger("variableRemoved",e),!0):!1:o(e)?(e.forEach(function(t){n.remove(t)}),!0):void 0}}]),r}(we),cn=function t(){ce(this,t),zt.call(this)};Mt("$on",function(e,n){if(t(e)&&a(n)){var r=this.$private.Events,i=this.$private.Hooks,o=r[e],u=this;if(!o){var h=function(){var t=arguments;Object.keys(o).forEach(function(e){var n=o[e];n.apply(u,t)})};r[e]={},o=r[e],i[e]=h}if(a(n)){var f=l();o[f]=n}var v={id:f,pool:o,remove:s,removeAll:c};return v}}),Mt("$trigger",function(t,e){var n=this.$private.Hooks,r=n[t];a(r)&&r(e)}),Mt("$destructor",function(){for(var t in this)delete this[t]});var ln={Behavior:Ne,Collection:nn,Distinct:we,ElementAction:Ze,ElementClassAction:We,Element:Qe,ElementCollection:rn,Extensible:xe,JSUIError:Se,Styleable:Ae,StyleInline:He,StyleRules:Ce,StyleSheet:Pe,StyleSheetRule:Te,StyleVariables:sn,Data:cn},hn={CSS:{equivalents:ye,vendors:pe},HTML:{tags:on}},fn={Style:{Sheets:de}},vn={};on.forEach(function(t){vn[t]=!0});var dn={isArray:o,isElement:y,isEmptyString:g,isFunction:a,isHTML:It,isJSUI:Lt,isNativeTag:Gt,isNull:i,isNumber:e,isObject:n,isPath:Ft,isRegex:Ut,isString:t,isStyleRule:v,isTextNode:qt,isUJSUI:A,isUndefined:St,isUStyleRule:h,isData:Bt,isUData:Xt,unhandled:m},pn=Object.getPrototypeOf({}),yn={Elements:{addClass:b,getClasses:Rt,childNodes:Zt,getFirstNonTextChild:Wt,getTagName:E,getTextNodes:Kt,nodeAttributes:Et},Events:{remove:s,removeAll:c},Functions:{debounce:Qt},General:{uid:l},Paths:{get:ut,getter:at,set:yt,setter:pt,getWithContext:st},Properties:{add:u,doOrSet:Yt,getAll:te},Strings:{capitalize:ee,uncapitalize:r}},mn={StyleSheet:{rules:f}},gn={"default":ie,"class":ae},bn={Class:{create:an},XML:{parse:ue},Data:{create:re},feval:Vt},En={fromJSON:re},kn={Settings:Re,Behavior:ln.Behavior,Element:ln.Element,Elements:un,Style:{Sheet:ln.StyleSheet,Rule:ln.StyleSheetRule,Inline:ln.StyleInline,Sheets:fn.Style.Sheets},Classes:ln,Constants:hn,Singletons:fn,TypeChecks:dn,Utilities:yn,Sorts:mn,Reflection:bn,Data:En};window.JSUI=kn}();
//# sourceMappingURL=JSUI.min.js.map