!function(){"use strict";function t(t){return"string"==typeof t}function e(t){return!isNaN(t)&&"number"==typeof t}function n(t){return"object"===("undefined"==typeof t?"undefined":we(t))}function r(t){return t.charAt(0).toLowerCase()+t.slice(1)}function i(t){return null===t}function o(t){return Array.isArray(t)}function a(t){return"function"==typeof t}function u(t,e,n){Object.defineProperty(t,e,{get:function(){var t=this["private"].state.hasOwnProperty(e)?this["private"].state[e]:n;return t},set:function(t){var r=this["private"].state.hasOwnProperty(e)?this["private"].state[e]:n,i=r;if(r=t,i!==t){this["private"].state[e]=r;var o={owner:this,property:e,old:i,"new":r},a=(this.trigger||this.$trigger).bind(this);a&&(a(e+"Changed",o),a("Changed",o))}},configurable:!0,enumerable:!0})}function s(){delete this.pool[this.id]}function c(){var t=this;Object.keys(this.pool).forEach(function(e){delete t.pool[e]})}function l(){return (Be>We&&(qe+=Be,Be=0), qe+Be++)}function f(){this["private"]={state:{},events:{},hooks:{}}}function h(){this.uid=l()}function p(t){return!!(t&&t.prototype&&(t.prototype instanceof tn||t===tn))}function v(t,e){var n=e.importance-t.importance,r=e["private"].created-t["private"].created;return n?n:r}function d(t){return t instanceof tn}function y(){this["private"].context="default",this["private"].style={rules:{}}}function m(t,e){var n=[];return (this.forEach(function(r){return a(r[t])?void n.push(r[t].apply(r,e)):void n.push(void 0)}), n)}function g(t,e){}function b(t){return t}function E(t){return t instanceof Element}function k(t){return""===t}function O(e,n){if(t(n)&&E(e)){if(e.classList&&e.classList.add)return void e.classList.add.apply(e.classList,n.split(" "));var r=e.className.split(" ");~r.indexOf(n)||(r.push(n),e.className=r.join(" "))}}function w(t){return E(t)?t.tagName.toLowerCase():"none"}function j(t){return (this.element=t, w(t))}function x(t){return (t=t||"div", this.element=document.createElement(t), t)}function _(t){var e=this,n=Sn(t),r=un[n];t=(r||function(){return un.string.call(this,"div")}).call(this,t),this.element.uid=this.uid;var i=on.Development;return (i.enabled&&i.references&&(this.element.JSUI=this), this.add("name"), this.on("nameChanged",function(t){if(t&&t.detail&&t.detail["new"]&&e.element&&t.detail["new"]){var n=t.detail["new"];if(!n)return;O(e.element,n)}}), this.name=t, this.style=new an(this), this.trigger("constructed"), this)}function C(t){this.element&&this.element.appendChild(t)}function S(t){this.element&&t.element&&(this.element.appendChild(t.element),this["private"].children=this["private"].children||{},this["private"].children[t.uid]=t,t["private"].parent=this,t.context="default"===t.context?this.context:t.context);var e={as:function(e){if(e){this[e]=t,t["private"].mapped=t["private"].mapped||{};var n=t["private"].mapped;n[this.uid]=n[this.uid]||[],n[this.uid].push(e),t.attribute("as",e),O(t.element,"as-"+e)}return t}.bind(this)};return e}function T(t){var e=this,n=[];return (t.forEach(function(t){n.push(e.add(t))}), n)}function A(t){u(this,t)}function P(t){if(this.element&&this.element.appendChild){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.appendChild(n.firstChild);this.element.appendChild(e)}}function N(t){return A.call(this,t)}function L(t){return!!(t&&t.prototype&&(t.prototype instanceof xn||t===xn))}function $(t){if(L(t))return this.add(new t)}function D(t){t&&t.appendChild(this.element)}function I(t){return t.add(this)}function R(t){var e=this,n=[];return (t.forEach(function(t){n.push(e.addTo(t))}), n)}function M(t){var e=this,n=[];return (t.forEach(function(t){n.push(e.remove(t))}), n)}function U(t){if(t.remove)return t.remove()}function H(){return (this.trigger("destructed"), this.destructor())}function J(t,e){var n=this,r=[];return (t.forEach(function(t){r.push(n.on(t,e))}), r)}function F(t){var e=this,n={};return (Object.keys(t).forEach(function(r){var i=t[r];n[r]=e.on(r,i)}), n)}function V(t,e){if(a(e)){var n=this["private"].events,r=n[t];if(!r){var i=function(){var t=this,e=arguments;Object.keys(r).forEach(function(n){var i=r[n];i.apply(t,e)})};n[t]={},r=n[t];var o=this.element;E(o)&&o.addEventListener(t,i,!1)}if(a(e)){var u=l();r[u]=e}var f={id:u,pool:r,remove:s,removeAll:c};return f}}function z(t,e){return V.call(this,t,e)}function G(t,e){return z.call(this,t,e)}function q(t,e){var n=this,r=[];return (t.forEach(function(t){r.push(n.trigger(t,e))}), r)}function B(t){var e=this;Object.keys(t).forEach(function(n){var r=t[n];e.trigger(n,r)})}function W(t,e){if(!this.element)return!1;var n=new CustomEvent(t,{detail:e});return (this.element.dispatchEvent(n), !0)}function X(t,e){return W.call(this,t,e)}function Z(t){var e=this,n=[];return (t.forEach(function(t){n.push(e.find(t))}), n)}function K(t){var e=[],n=xn.isPrototypeOf(t.prototype);if(n){var r=t.prototype;this.children(function(t){r.isPrototypeOf(t)&&e.push(t)})}return e}function Q(t){var e=[];return (this.children(function(n){n instanceof t&&e.push(n)}), e)}function Y(t){var e=[];return (this.children(function(n){if(n.element){var r=n.element,i=r.innerText||r.textContent||"";t.test(i)&&e.push(n)}}), e)}function tt(t){var e=null;return (e=this.element.querySelectorAll(t), e=e&&null!==e?e:[])}function et(t){return tt.call(this,t)}function nt(){var t=[];return (this.children(function(e){t.push(e)}), t)}function rt(t){var e=this,n=[];return (t.forEach(function(t){n.push(e["with"](t))}), n)}function it(t){return (t.call(this), this)}function ot(t){var e=this,n=[];return (t.forEach(function(t){n.push(e["do"](t))}), n)}function at(t){var e=this,n={};return (Object.keys(t).forEach(function(r){n[r]=e["do"](r,t[r])}), n)}function ut(t,e){if(a(this[t]))return o(e)?this[t].apply(this,e):this[t](e)}function st(t,e){if(n(t))return t[e]}function ct(e,n){return t(n)?n.substring(1).split(".").reduce(st,e):o(n)?n.reduce(st,e):void 0}function lt(t,e){var n=e.substring(1).split(".");if(n.length){if(1===n.length)return{context:t,property:n[0]};var r=n.splice(n.length-1,1),i=ct(t,n);return!!i&&{context:i,property:r[0]}}}function ft(t,e){var n=lt(this,t);if(n&&n.context&&n.property){var r=n.context[n.property];return a(r)?o(e)?r.apply(n.context,e):r.call(n.context,e):void 0}}function ht(t){var e=this,n=[];return (t.forEach(function(t){n.push(e.get(t))}), n)}function pt(t){if(t)return this[t]}function vt(t){return ct(this,t)}function dt(t){var e=this,n={};return (Object.keys(t).forEach(function(r){n[r]=e.set(r,t[r])}), n)}function yt(t,e){if(t)return (this[t]=e, e)}function mt(t,e,n){var r=e.substring(1).split(".");if(r.length){if(1===r.length)return (t[r[0]]=n, !0);var i=r.splice(r.length-1,1),o=ct(t,r);return!!o&&(o[i[0]]=n,!0)}}function gt(t,e,n){return mt(t,e,n)}function bt(t,e){return gt(this,t,e)}function Et(t,e){var n=this["private"].state[t],r=n!==e,i=this;if(r){this["private"].state[t]=e;var o={property:t,old:n,"new":e};i.trigger(t+"Changed",o),i.trigger("Changed",o)}return r}function kt(t){if(this["private"]&&this.element){if(!this["private"].text){var t=document.createTextNode(t);return (this["private"].text=t, this.element.appendChild(t), !0)}return (this["private"].text.nodeValue=t, !0)}return!1}function Ot(t){return _string.call(this,t)}function wt(){}function jt(t,e){if(a(e)||(e=wt),E(t)){for(var n=t.attributes,r={},i=n.length-1;i>=0;i--){var o=n[i],u=o.name,s=o.value;if(r[u]=s,e(u,s,o))break}return r}}function xt(){var t={};return (jt(this.element,function(e,n,r){t[e]=n}), t)}function _t(t){return this.element.getAttribute(t)}function Ct(){return _t.apply(this,arguments)}function St(t){var e=this,n={};return (t.forEach(function(t){n[t]=e.attribute(t)}), n)}function Tt(t,e){var r=this;n(e)?e:{};return (Object.keys(t).forEach(function(e){results[e]=r.attribute(e,t[e])}), results)}function At(t){return Tt.call(this,t)}function Pt(t){return"undefined"==typeof t}function Nt(t,e){return Pt(e)||i(e)?(this.element.removeAttribute(t),!0):(this.element.setAttribute(t,e),!0)}function Lt(){return Nt.apply(this,arguments)}function $t(t,e){var n=this,r=[];return (t.forEach(function(t){r.push(n.attribute(t,e))}), r)}function Dt(t){var e=this,n=[];return (t.forEach(function(t){n.push(e["class"](t))}), n)}function It(t){var e="";return (Object.keys(t).forEach(function(n){t[n]&&(e+=n)}), this.element.className=e, e)}function Rt(e){if(E(e)){var n={};if(t(e.className)){var r=e.className.split(" ");o(r)&&r.forEach(function(t){n[t]=!0})}return n}}function Mt(t){if(!k(t))return new wn(this.element,t)}function Ut(){return Mt.apply(this,arguments)}function Ht(){return Rt(this.element)}function Jt(t){return t instanceof xn}function Ft(t){return t instanceof RegExp}function Vt(t){return _n.test(t)}function zt(t){return"string"==typeof t&&t.length>0&&"@"===t[0]}function Gt(){f.apply(this,arguments),h.apply(this,arguments),y.apply(this,arguments),_.apply(this,arguments)}function qt(t){var e=t.replace(/^[^-_a-zA-Z]+/,"_").replace(/^-(?:[-0-9]+)/,"_"),n=e&&e.replace(/[^-_a-zA-Z0-9]+/g,"_");return n}function Bt(t){return new Function(t)()}function Wt(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Xt(){Object.defineProperty(this,"$private",{configurable:!0,enumerable:!1,writable:!0,value:{events:{},hooks:{},state:{}}}),Object.defineProperty(this,"$uid",{configurable:!0,enumerable:!1,writable:!0,value:l()})}function Zt(t,e){Object.defineProperty(Dn.prototype,t,{configurable:!0,enumerable:!1,writable:!0,value:e})}function Kt(t){return!!Un[t]}function Qt(t){return!(!t||"#text"!==t.nodeName)}function Yt(t){return t instanceof Dn}function te(t){return!!(t&&t.prototype&&(t.prototype instanceof Dn||t===Dn))}function ee(){}function ne(t,e){if(a(e)||(e=ee),E(t)){for(var n=[],r=t.childNodes.length,i=0;i<r;i++){var o=t.childNodes[i];if(n.push(o),e(o))break}return n}}function re(t){if(E(t)){var e;return (ne(t,function(t){if(!Qt(t))return (e=t, !0)}), e)}}function ie(t,e){for(var n=[],r=0;r<t.childNodes.length;r++){var i=t.childNodes[r];if(Qt(i)&&(n.push(i),e))break}return n}function oe(t,e){if(a(t)){var n;return function(){clearTimeout(n),n=setTimeout(t,e)}}}function ae(t,e,n){return!!t.hasOwnProperty(e)&&(a(t[e])?(t[e].apply(t,n),!0):(t[e]=n,!0))}function ue(t){var e=[];do Object.getOwnPropertyNames(t).forEach(function(t){e.indexOf(t)===-1&&e.push(t)});while((t=Object.getPrototypeOf(t))&&t!==Jn);return e}function se(t,e,n){var r=this;Object.defineProperty(this,"$name",{configurable:!0,enumerable:!1,writable:!0,value:""+t}),Object.defineProperty(this,"$uid",{configurable:!0,enumerable:!1,writable:!0,value:""+e}),Object.keys(n).forEach(function(t){var e=new n[t];Object.defineProperty(e,"$parent",{configurable:!0,enumerable:!1,writable:!0,value:r}),r[t]=e,e.$on("Changed",function(t){t.name=r.$name,t.namespace=r.$namespace,r.$trigger("Changed",t)})})}function ce(t,e,r){t=qt(t),r=r||t;var i={},o="\n\t\treturn (function(name, namespace, structure, Data, Subclasses, constructor, subconstructor) {\n\t\t\tfunction "+t+"() {\n\t\t\t\tconstructor.call(this);\n\t\t\t\tsubconstructor.call(this, name, namespace, Subclasses);\n\t\t\t}\n\t\t\t"+t+".prototype = Object.create(Data.prototype);\n\t\t\t"+t+".constructor = "+t+";\n\t\t\t"+t+".prototype.toJSON = function toJSON() {\n\t\t\t\tvar self = this;\n\t\t\t\tvar copy = {};\n\t\t\t\tObject.keys(structure).forEach(function(key) {\n\t\t\t\t\tconsole.log(key)\n\t\t\t\t\tcopy[key] = self[key];\n\t\t\t\t});\n\t\t\t\tconsole.log(copy);\n\t\t\t\treturn copy;\n\t\t\t};\n\t\t\treturn "+t+";\n\t\t})\n\t",a=Bt.call(window,o)(t,r,e,Dn,i,Xt,se);return (Object.keys(e).forEach(function(r){var o=e[r];return n(o)?void(i[r]=ce(r,o,t+"."+r)):void Object.defineProperty(a.prototype,r,{get:function(){var t=this.$private.state;return t.hasOwnProperty(r)?this.$private.state[r]:o},set:function(t){var e=this.$private.state;if(e){var n=e[r];if(e[r]=t,n!==t){var i={owner:this,property:r,old:n,"new":t},o=e.$trigger;o||(o=this.$trigger.bind(this),e.$trigger=o),o&&(o(r+"Changed",i),o("Changed",i))}}else;},configurable:!0,enumerable:!0})}), a)}function le(t){var e=!!t&&t.detail;if(e){var r=e.owner,i=e.property,o=e["new"];r&&r.element&&a(r.element.getAttribute)&&r.element.getAttribute(i,n(o)?JSON.stringify(o):o)}}function fe(t,e,n){var r=w(t),i=r.split("-").reduce(st,e);if(i){for(var o=new i,a=t.attributes,u=(Kt(r),a.length-1);u>=0;u--){var s=a[u],c=s.name,l=s.value;o.element.setAttribute(c,l),o.hasOwnProperty(c)?ae(o,c,l):(o.add(c),o.on(c+"Changed",le),o[c]=l)}var f=[];return (ne(t,function(t){if(Qt(t)){var n=document.createTextNode("");return (o.element.appendChild(n), o["private"].text=n, void f.push({node:n,value:t.nodeValue}))}var r=t.getAttribute("as"),i=o.add(fe(t,e));r&&i&&isFunction(i.as)&&i.as(r)}), f.forEach(function(t){t.node.nodeValue=t.value}), o)}}function he(t,e,n){var r=!1;n||(n={map:{},aliases:{},Counts:{element:0,instance:0,text:0}},r=!0);var i,o=w(t),a=n.map[o];if(!a){var u=o.split("-").reduce(st,e);if(!L(u))return;i="element"+n.Counts.element,n.Counts.element++,a={type:u,alias:i},n.map[o]=a,n.aliases[i]=a}i||(i=a.alias);var s=t.getAttribute("as"),c="instance"+n.Counts.instance;n.Counts.instance++;var l="\t// "+(s||"Anonymous Element"),f="\tvar "+c+" = "+(r?"this":"new "+i+"();"),h=[],p=[],v=[];ne(t,function(t){if(Qt(t)){var r="text"+n.Counts.text;return (p.push("\tvar "+r+" = document.createTextNode('');"), p.push("\t"+c+".element.appendChild("+r+");"), h.push({name:r,value:t.nodeValue}), void n.Counts.text++)}p.push("\n");var i=he(t,e,n),o=i.name;p.push(i.code),p.push("\n\t// Adding Children"),p.push("\t"+c+".add("+o+")"+(s?".as('"+s+"')":"")+";"),p.push("\n\t// Text Node Assignments"),v.push(i.text)});var d=h[h.length-1],y=d.name;return (p.push("\t"+c+".private.text = "+y+";"), h=Array.prototype.concat.apply(h,v), p=p.join("\n"), {tag:o,directory:a,name:c,code:[l,f,p].join("\n"),as:s,text:h,state:n})}function pe(t,e,n){var r=t.childNodes,i=(r.length,re(t));if(i){var o,a=w(i),u=n.getAttribute("name")||"Anonymous"+l(),s=n.getAttribute("inherits"),c=n.getAttribute("tag")||a;s&&(o=s.split("-").reduce(st,e)),o=o||element;var f=he(i,e),h=Object.keys(f.state.aliases),p=["\n\t// Imports"];h.forEach(function(t){p.push("\tvar "+t+" = classes."+t+".type;")}),p.push("\n");var v={},d=[];f.text.forEach(function(t){var e=t.name,n=t.value;v[e]=n,d.push("\t"+e+".nodeValue = texts."+e+";")});var y="\n return (function compile(element, constructor, classes, texts, inherits) {\n"+p.join("\n")+("\n\tfunction "+u+"() { \n")+"\tconstructor = (inherits === element ? constructor : inherits.constructor);\n"+("\tconstructor.call(this, '"+c+"'); \n")+("\tthis.type = '"+u+"'; \n\n")+"\t// Generated \n"+f.code+"\n\n\t// Assign Text Values \n"+d.join("\n")+"\n}\n"+("\n\t"+u+".prototype = Object.create(inherits.prototype);\n")+("\n\t"+u+".constructor = "+u+";\n")+("\t return "+u+";\n")+"});",m=Bt.call(window,y)(xn,_,f.state.aliases,v,o);return m}}function ve(e,n){var r;if(t(e)&&(r=document.createElement("container"),r.innerHTML=e),E(e)&&(r=e),r){var i=re(r),o=w(i),a=zn[o];return(a||zn["default"]).call(this,i,n||Ln,i)}}var de=!!Array.prototype.forEach;de||(Array.prototype.forEach=function(t,e){var n,r;if(null===this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),r=0;r<o;){var a;r in i&&(a=i[r],t.call(n,a,r,i)),r++}});var ye=!de,me=!!Array.isArray;me||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var ge=!me,be=!!Array.prototype.map;be||(Array.prototype.map=function(t,e){var n,r,i;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),a=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),r=new Array(a),i=0;i<a;){var u,s;i in o&&(u=o[i],s=t.call(n,u,i,o),r[i]=s),i++}return r});var Ee=!be,ke=!!Array.prototype.reduce;Array.prototype.reduce||(Array.prototype.reduce=function(t){if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var e,n=Object(this),r=n.length>>>0,i=0;if(2==arguments.length)e=arguments[1];else{for(;i<r&&!(i in n);)i++;if(i>=r)throw new TypeError("Reduce of empty array with no initial value");e=n[i++]}for(;i<r;i++)i in n&&(e=t(e,n[i],i,n));return e});var Oe=!ke,we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je=(function(){function t(t){this.value=t}function e(e){function n(t,e){return new Promise(function(n,i){var u={key:t,arg:e,resolve:n,reject:i,next:null};a?a=a.next=u:(o=a=u,r(t,e))})}function r(n,o){try{var a=e[n](o),u=a.value;u instanceof t?Promise.resolve(u.value).then(function(t){r("next",t)},function(t){r("throw",t)}):i(a.done?"return":"normal",a.value)}catch(t){i("throw",t)}}function i(t,e){switch(t){case"return":o.resolve({value:e,done:!0});break;case"throw":o.reject(e);break;default:o.resolve({value:e,done:!1})}o=o.next,o?r(o.key,o.arg):a=null}var o,a;this._invoke=n,"function"!=typeof e["return"]&&(this["return"]=void 0)}return("function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}), e.prototype.next=function(t){return this._invoke("next",t)}, e.prototype["throw"]=function(t){return this._invoke("throw",t)}, e.prototype["return"]=function(t){return this._invoke("return",t)}, {wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}})}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),xe=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return (n&&t(e.prototype,n), r&&t(e,r), e)}}(),_e=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},Ce=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Se=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},Te=!!Object.keys;Te||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!==("undefined"==typeof i?"undefined":we(i))&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,a,u=[];for(o in i)t.call(i,o)&&u.push(o);if(e)for(a=0;a<r;a++)t.call(i,n[a])&&u.push(n[a]);return u}}());var Ae=!Te,Pe="function"==typeof window.CustomEvent;if(!Pe){var Ne=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return (n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail), n)};Ne.prototype=window.Event.prototype,window.CustomEvent=Ne}var Le=!Pe,$e=!!Element.prototype.addEventListener;if(!$e){var De=[],Ie=function(t,e){var n=this,r=function(t){t.target=t.srcElement,t.currentTarget=n,"undefined"!=typeof e.handleEvent?e.handleEvent(t):e.call(n,t)};if("DOMContentLoaded"==t){var i=function(t){"complete"==document.readyState&&r(t)};if(document.attachEvent("onreadystatechange",i),De.push({object:this,type:t,listener:e,wrapper:i}),"complete"==document.readyState){var o=new Event;o.srcElement=window,i(o)}}else this.attachEvent("on"+t,r),De.push({object:this,type:t,listener:e,wrapper:r})},Re=function(t,e){for(var n=0;n<De.length;){var r=De[n];if(r.object==this&&r.type==t&&r.listener==e){"DOMContentLoaded"==t?this.detachEvent("onreadystatechange",r.wrapper):this.detachEvent("on"+t,r.wrapper),De.splice(n,1);break}++n}};Element.prototype.addEventListener=Ie,Element.prototype.removeEventListener=Re,HTMLDocument&&(HTMLDocument.prototype.addEventListener=Ie,HTMLDocument.prototype.removeEventListener=Re),Window&&(Window.prototype.addEventListener=Ie,Window.prototype.removeEventListener=Re),Event.prototype.preventDefault||(Event.prototype.preventDefault=function(){this.returnValue=!1}),Event.prototype.stopPropagation||(Event.prototype.stopPropagation=function(){this.cancelBubble=!0})}var Me=!$e,Ue={Array:{forEach:ye,isArray:ge,map:Ee,reduce:Oe},Object:{keys:Ae},DOM:{CustomEvent:Le,addEventListener:Me}},He={},Je=["webkit","moz","ms","o"],Fe={},Ve=document.createElement("div");for(var ze in Ve.style)try{Ve.style[ze]="inherit";var Ge=(Ve.getAttribute("style")||"").split(":")[0];Fe[ze]=Ge,Ve.setAttribute("style",""),Je.forEach(function(t){var e="-"+t+"-";if(~Ge.indexOf(e)){var n=ze;n=r(n.replace(t,"")),Fe[n]=Ge,Fe[Ge.replace(e,"")]=Ge}})}catch(t){}var qe="",Be=0,We=Number.MAX_SAFE_INTEGER-1,Xe=function(){function e(){je(this,e),f.call(this)}return (xe(e,[{key:"add",value:function(e,r){var i=this;return t(e)?void u(this,e):o(e)?void e.forEach(function(t){i.add(t,r)}):void(n(e)&&Object.keys(e).forEach(function(t){i.add(t,e[t])}))}},{key:"remove",value:function(e){var n=this;return t(e)?void delete this[e]:void(o(e)&&e.forEach(function(t){n.remove(t)}))}},{key:"on",value:function(e,n){if(t(e)&&a(n)){var r=this["private"].events,i=this["private"].hooks,o=r[e],u=this;if(!o){var f=function(){var t=arguments;Object.keys(o).forEach(function(e){var n=o[e];n.apply(u,t)})};r[e]={},o=r[e],i[e]=f}if("function"==typeof n){var h=l();o[h]=n}var p={id:h,pool:o,remove:s,removeAll:c};return p}}},{key:"trigger",value:function(t,e){var n=this["private"].hooks,r=n[t];a(r)&&r(e)}},{key:"destructor",value:function(){for(var t in this)delete this[t]}}]), e)}(),Ze=function(t){function e(){je(this,e);var t=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return (h.call(t), t)}return (Ce(e,t), e)}(Xe),Ke=function(t){function e(){je(this,e);var t=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return (t["private"].styles={}, t)}return (Ce(e,t), e)}(Ze);Object.keys(Fe).forEach(function(t){Object.defineProperty(Ke.prototype,t,{get:function(){return this["private"].styles[t]},set:function(e){var n=this["private"].styles[t];if(this["private"].styles[t]=e,i(e)&&delete this["private"].styles[t],n!==e){var r={owner:this,property:t,old:n,"new":e};this.trigger&&(this.trigger(t+"Changed",r),this.trigger("styleChanged",r))}},configurable:!0,enumerable:!0})});var Qe=function(t){function e(t,n,r){return (je(this,e), Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)))}return (Ce(e,t), xe(e,[{key:"throw",value:function(t,e,n){window.console&&window.console.trace&&console.trace(t||"")}}]), e)}(Error),Ye=function(n){function r(t){je(this,r);var e=Se(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));t=t||"default",e["private"].rules={},e["private"].timer=!1,e["private"].element=!1,e["private"].context=t;var n=He[t];if(n){var i;return (e["private"]=n["private"], i=e, Se(e,i))}var o=document.createElement("style");return (o.appendChild(document.createTextNode("")), o.setAttribute("id","style-"+t), document.head.appendChild(o), e["private"].element=o, He[t]=e, e)}return (Ce(r,n), xe(r,[{key:"add",value:function(t){if(d(t)){var e=this["private"].rules;return e[t.uid]?(e[t.uid].references++,!0):(e[t.uid]={references:1,rule:t},this.render(10))}if(p(t))return this.add(new t(this.context))}},{key:"remove",value:function(e){var n=this["private"].rules;if(t(e)){var r=n[e];return void(r&&(r.references--,r.references<1&&(delete n[e],this.render(10))))}d(e)&&this.remove(e.uid)}},{key:"render",value:function(t){var n=this,r=this["private"].rules;if(clearTimeout(this["private"].timer),e(t))return void(this["private"].timer=setTimeout(this.render.bind(this),t));var i=Object.keys(r);if(!i.length)return void document.head.removeChild(this["private"].element);var o=document.createElement("style");o.setAttribute("id","style-"+this.context),o.appendChild(document.createTextNode("")),document.head.appendChild(o),o.sheet.disabled=!0;var a=[];i.forEach(function(t){var e=r[t];a.push(e.rule)}),a.sort(this.sorter),a.forEach(function(t){var e=t.render(n.context);o.sheet.insertRule(e,t.importance)}),o.sheet.disabled=!1,document.head.removeChild(this["private"].element),this["private"].element=o,this.trigger("rendered")}},{key:"context",get:function(){return this["private"].context}},{key:"variables",get:function(){},set:function(t){}},{key:"sorter",get:function(){return this["private"].sorter?this["private"].sorter:v},set:function(t){a(t)&&(this["private"].sorter=t)}}]), r)}(Ze),tn=function(r){function i(t,e){je(this,i);var r=Se(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return (r["private"].importance=0, r["private"].created=(new Date).valueOf(), t&&(r.selector=t), n(e)&&r.set(e), r)}return (Ce(i,r), xe(i,[{key:"set",value:function(e,r){var i=this;return n(e)?void Object.keys(e).forEach(function(t){var n=e[t];i[t]=n}):void(t(e)&&arguments.length>1&&t(r)&&(this[e]=r))}},{key:"render",value:function(t){var e=this;t=t||this["private"].context||"default";var n=He[t]||new Ye(t);if(!n["private"].rules[this.uid])return void n.add(this);if(!this.selector){var r=new Qe;r["throw"]()}var i=[],o="";Object.keys(this["private"].styles).forEach(function(t){var n=Fe[t],r=e["private"].styles[t];i.push(n+": "+r+";")});var a=this.selector,u=this.media,s=u?"\t":"",c=i.join("\n\t"+s);return (o=""+s+a+" {\n\t"+s+c+"\n"+s+"}", u&&(o=u+" {\n"+o+"\n}"), o)}},{key:"selector",get:function(){return this["private"].selector},set:function(e){var n=this,r=this,i=function(){var t=n["private"].selector;n.trigger("selectorChanged",{owner:r,old:t,"new":e})};if(t(e))return (this["private"].selector=e, void i())}},{key:"media",get:function(){return this["private"].media},set:function(e){var n=this,r=this,i=function(){var t=n["private"].media;n.trigger("mediaChanged",{owner:r,old:t,"new":e})};if(t(e))return (this["private"].media=e, void i())}},{key:"importance",get:function(){return this["private"].importance||0},set:function(t){e(t)&&(this["private"].importance=t),this.trigger("importanceChanged")}},{key:"context",get:function(){return this["private"].context||"default"},set:function(t){this["private"].context=t,this.trigger("contextChanged")}}]), i)}(Ke),en=function(t){function e(){je(this,e);var t=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return (y.call(t), t)}return (Ce(e,t), xe(e,[{key:"add",value:function(t){if(d(t)){var e=this["private"].style.rules,n=e[t.uid];if(!n)return (n={rule:t,context:this.context}, e[t.uid]=n, void t.render(this.context));if(n.context!==this.context){var r=He[n.context];return void(r&&(r.remove(t),t.render(this.context)))}}}},{key:"context",get:function(){return this["private"].context},set:function(t){var e=this,n=this["private"].context;n!==t&&(this["private"].context=t,Object.keys(this["private"].style.rules).forEach(function(t){var r=e["private"].style.rules[t];He[n].remove(r.rule),r.rule.render(e["private"].context)}),this.trigger("contextChanged"))}}]), e)}(Ze),nn=function(t){function e(t){je(this,e);var n=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return (n["private"].host=t, n.context="behavior", n)}return (Ce(e,t), xe(e,[{key:"destructor",value:function(){_e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destructor",this).call(this)}},{key:"host",get:function(){return this["private"].host},set:function(t){this["private"].host=t}}]), e)}(en),rn={string:m,path:g},on={Development:{enabled:!1,traceErrors:!0,haltOnErrors:!0,references:!0},Production:{}},an=function(e){function r(t){je(this,r);var e=Se(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return (e["private"].host=t||!1, e.on("styleChanged",function(t){e["private"].host&&t.property&&(e["private"].host.element.style[t.property]=t["new"])}), e)}return (Ce(r,e), xe(r,[{key:"set",value:function(e,r){var i=this;return n(e)?void Object.keys(e).forEach(function(t){var n=e[t];i[t]=n}):void(t(e)&&arguments.length>1&&t(r)&&(this[e]=r))}},{key:"host",get:function(){return this["private"].host},set:function(t){Jt(t)&&(this["private"].host=t.element)}}]), r)}(Ke),un={element:j,string:x},sn=function(){var t=this,e=this.element,n=this["private"];if(e){var r=e.parentNode;if(a(e.remove))return void e.remove();if(r&&a(r.removeChild))return void r.removeChild(e)}var i=this.style;i&&i.Host&&delete i.Host,Object.keys(this).forEach(function(e){delete t[e]});var u=n.parent;if(u){if(n&&n.mapped){var s=n.mapped[u.uid];s&&o(s)&&s.forEach(function(t){delete u[t]})}u.children&&delete u.children[this.uid]}var c=n.children;return (c&&Object.keys(c).forEach(function(t){var e=c[t];e&&(a(e.remove)&&e.remove(),delete c[t])}), e=null, n=null, u=null, c=null, !0)},cn={element:C,jsui:S,array:T,string:A,html:P,path:N,"function":$},ln={element:D,jsui:I,array:R},fn={array:M,jsui:U,undefined:H},hn={array:J,object:F,string:z,path:G},pn={array:q,object:B,string:W,path:X},vn={array:Z,"function":K,jsui:Q,regex:Y,string:tt,path:et,undefined:nt},dn={array:rt,"function":it},yn={array:ot,object:at,string:ut,path:ft},mn={array:ht,string:pt,path:vt},gn={object:dt,string:yt,path:bt},bn={string:Et},En={string:kt,path:Ot},kn={Get:{undefined:xt,string:_t,path:Ct,array:St,object:At},Set:{string:Nt,path:Lt,array:$t,object:Tt}},On=function(){function t(e){je(this,t),this["private"]={element:e||!1}}return (xe(t,[{key:"element",get:function(){return this["private"].element},set:function(t){this["private"].element=t}}]), t)}(),wn=function(t){function e(t,n){je(this,e);var r=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return (r.element=t, r["private"].classes=n.split(" "), r)}return (Ce(e,t), xe(e,[{key:"add",value:function(){var t=Rt(this.element)||{};return (this["private"].classes.forEach(function(e){t[e]=!0}), this.element.className=Object.keys(t).join(" "), t)}},{key:"remove",value:function(){var t=Rt(this.element)||{};return (this["private"].classes.forEach(function(e){delete t[e]}), this.element.className=Object.keys(t).join(" "), t)}},{key:"toggle",value:function(){var t=Rt(this.element)||{};return (this["private"].classes.forEach(function(e){return t[e]?void delete t[e]:void(t[e]=!0)}), this.element.className=Object.keys(t).join(" "), t)}},{key:"exists",value:function(){for(var t=Rt(this.element)||{},e=this["private"].classes,n=e.length,r=0;r<n;r++){var i=e[r];if(!t[i])return!1}return!0}}]), e)}(On),jn={array:Dt,object:It,string:Mt,path:Ut,undefined:Ht},xn=function(t){function e(t){je(this,e);var n=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return (_.call(n,t), n.on("contextChanged",function(){n.children(function(t){t.context="default"===t.context?n.context:t.context})}), n)}return (Ce(e,t), xe(e,[{key:"add",value:function(t){var n=Sn(t),r=cn[n];return(r||_e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this)||b).call(this,t)}},{key:"addTo",value:function(t){var e=Sn(t),n=ln[e];return(n||b).call(this,t)}},{key:"remove",value:function(t){var e=Sn(t),n=fn[e];return(n||b).call(this,t)}},{key:"on",value:function(t,e){var n=Sn(t),r=hn[n];return(r||b).call(this,t,e)}},{key:"trigger",value:function(t,n){var r=Sn(t),i=pn[r];return (_e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"trigger",this).call(this,t,n), (i||b).call(this,t,n))}},{key:"find",value:function(t){var e=Sn(t),n=vn[e];return(n||b([])).call(this,t)}},{key:"with",value:function(t){var e=Sn(t),n=dn[e];return(n||b).call(this,t)}},{key:"do",value:function(t,e){var n=Sn(t),r=yn[n];return(r||b).call(this,t,e)}},{key:"get",value:function(t){var e=Sn(t),n=mn[e];return(n||b).call(this,t)}},{key:"set",value:function(t,e){var n=Sn(t),r=gn[n];return(r||b).call(this,t,e)}},{key:"state",value:function(t,e){var n=Sn(t),r=bn[n];return(r||b).call(this,t,e)}},{key:"text",value:function(t){var e=Sn(t),n=En[e];return(n||b).call(this,t)}},{key:"attribute",value:function(t,e){if(E(this.element)&&!k(t)){var n=Sn(t),r=arguments.length>1,i=kn[r?"Set":"Get"][n];return(i||b).apply(this,[t,e])}}},{key:"class",value:function(t){var e=Sn(t),n=jn[e];return(n||b).call(this,t)}},{key:"children",value:function t(e){var n=[];
if(a(e)&&self["private"]&&self["private"].children){var t=self["private"].children;Object.keys(t).forEach(function(r){var i=t[r];i&&n.push(e(i,r))})}return n}},{key:"destructor",value:function(){sn.call(this)}}]), e)}(en),_n=/^<([a-z]+)([^<]+)*(?:>(.*)<\/\1>|\s+\/>)$/,Cn={object:{"null":i,array:o,element:E,jsui:Jt,regex:Ft},string:{html:Vt,path:zt}},Sn=function(t){var e="undefined"==typeof t?"undefined":we(t),n=Cn[e];if(!n)return e;for(var r in n){var i=n[r];if(i(t))return r}return e},Tn=function(t){function e(t){je(this,e);var n=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return (o(t)&&t.forEach(function(t){n.push(t)}), n)}return (Ce(e,t), xe(e,[{key:"doToEach",value:function(t,e){var n=Sn(t),r=rn[n];return(r||b).call(this,t,e)}}]), e)}(Array),An=function(t){function e(t){var n;je(this,e);var r=Se(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return (n=r.doToEach("constructor",arguments), Se(r,n))}return (Ce(e,t), xe(e,[{key:"add",value:function(){return this.doToEach("add",arguments)}},{key:"addTo",value:function(){return this.doToEach("addTo",arguments)}},{key:"remove",value:function(){return this.doToEach("remove",arguments)}},{key:"on",value:function(){return this.doToEach("on",arguments)}},{key:"trigger",value:function(){return this.doToEach("trigger",arguments)}},{key:"find",value:function(){return this.doToEach("find",arguments)}},{key:"with",value:function(){return this.doToEach("with",arguments)}},{key:"do",value:function(){return this.doToEach("do",arguments)}},{key:"get",value:function(){return this.doToEach("get",arguments)}},{key:"set",value:function(){return this.doToEach("set",arguments)}},{key:"text",value:function(){return this.doToEach("text",arguments)}},{key:"attribute",value:function(){return this.doToEach("attribute",arguments)}},{key:"class",value:function(){return this.doToEach("class",arguments)}},{key:"children",value:function(){return this.doToEach("children",arguments)}},{key:"destructor",value:function(){return this.doToEach("destructor",arguments)}}]), e)}(Tn),Pn=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","datalist","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","video","wbr"],Nn=function(t,e,n,r){t=qt(t),e=e.toLowerCase();var i=n||xn,o=r||Gt,a="\n\t\treturn (function(element, constructor) {\n\t\t\tfunction "+t+"() {\n\t\t\t\tconstructor.call(this, '"+e+"');\n\t\t\t\tthis.name = '"+t+"';\n\t\t\t}\n\t\t\t"+t+".prototype = Object.create(element.prototype);\n\t\t\t"+t+".constructor = "+t+";\n\t\t\treturn "+t+";\t\t\t\t\t\n\t\t})\n\t";return Bt.call(window,a)(i,o)},Ln={};Pn.forEach(function(t){var e=Wt(t);try{Ln[e]=Nn(e,t)}catch(n){Ln[e]=Nn(t,t)}});var $n=function(e){function r(){return (je(this,r), Se(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)))}return (Ce(r,e), xe(r,[{key:"add",value:function(e,r){var i=this;return t(e)?(u(this,e,r),void this.trigger("variableAdded",{name:e,value:r})):void(n(e)&&Object.keys(e).forEach(function(t){i.add(t,e[t])}))}},{key:"remove",value:function(e){var n=this;return t(e)?!!this[e]&&(delete this[e],trigger("variableRemoved",e),!0):o(e)?(e.forEach(function(t){n.remove(t)}),!0):void 0}}]), r)}(Ze),Dn=function t(){je(this,t),Xt.call(this)};Zt("$on",function(e,n){if(t(e)&&a(n)){var r=this.$private.events,i=this.$private.hooks,o=r[e],u=this;if(!o){var f=function(){var t=arguments;Object.keys(o).forEach(function(e){var n=o[e];n.apply(u,t)})};r[e]={},o=r[e],i[e]=f}if(a(n)){var h=l();o[h]=n}var p={id:h,pool:o,remove:s,removeAll:c};return p}}),Zt("$trigger",function(t,e){var n=this.$private.hooks,r=n[t];a(r)&&r(e)}),Zt("$destructor",function(){for(var t in this)delete this[t]}),Zt("$bind",function(t){});var In={Behavior:nn,Collection:Tn,Distinct:Ze,ElementAction:On,ElementClassAction:wn,Element:xn,ElementCollection:An,Extensible:Xe,JSUIError:Qe,Styleable:en,StyleInline:an,StyleRules:Ke,StyleSheet:Ye,StyleSheetRule:tn,StyleVariables:$n,Data:Dn},Rn={CSS:{equivalents:Fe,vendors:Je},HTML:{tags:Pn}},Mn={Style:{Sheets:He}},Un={};Pn.forEach(function(t){Un[t]=!0});var Hn={isArray:o,isElement:E,isEmptyString:k,isFunction:a,isHTML:Vt,isJSUI:Jt,isNativeTag:Kt,isNull:i,isNumber:e,isObject:n,isPath:zt,isRegex:Ft,isString:t,isStyleRule:d,isTextNode:Qt,isUJSUI:L,isUndefined:Pt,isUStyleRule:p,isData:Yt,isUData:te},Jn=Object.getPrototypeOf({}),Fn={Elements:{addClass:O,getClasses:Rt,childNodes:ne,getFirstNonTextChild:re,getTagName:w,getTextNodes:ie,nodeAttributes:jt},Events:{on:V,remove:s,removeAll:c},Functions:{debounce:oe},General:{uid:l},Paths:{get:ct,getter:st,set:gt,setter:mt,getWithContext:lt},Properties:{add:u,doOrSet:ae,getAll:ue},Strings:{capitalize:Wt,uncapitalize:r}},Vn={StyleSheet:{rules:v}},zn={"default":fe,"class":pe},Gn={Class:{create:Nn},XML:{parse:ve},Data:{create:ce},feval:Bt},qn={fromJSON:ce},Bn={Settings:on,Behavior:In.Behavior,Element:In.Element,Elements:Ln,Style:{Sheet:In.StyleSheet,Rule:In.StyleSheetRule,Inline:In.StyleInline,Sheets:Mn.Style.Sheets},Classes:In,Constants:Rn,Singletons:Mn,TypeChecks:Hn,Utilities:Fn,Sorts:Vn,Reflection:Gn,Data:qn,Polyfilled:Ue};window.JSUI=Bn}();